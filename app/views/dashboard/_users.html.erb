<ul class="collection with-header">

  <table>
    <thead>
    <tr>
      <th data-field="username">Username</th>
      <th data-field="provider">Provider</th>
      <th>Action</th>
    </tr>
    </thead>

    <tbody>

    <% users.each do |user| %>
      <tr>
        <td><%= user.name %></td>
        <td>
          <% user.authorizations.each do |auth| %>
            <%= auth.provider %>
          <% end %>
        </td>
        <td>
          <!-- PUT THIS IN PRESENTOR -->
          <% if current_user == user %>
            <% disable = "disabled" %>
          <% else %>
            <% disable = "" %>
          <% end %>

          <%= render partial: "follows.submit.button",
                     locals:  {
                       method_to_use:  "post",
                       users:          [user],
                       authorizations: user.authorizations,
                       button_icon:    "add_circle",
                       button_classes: "btn-floating btn waves-effect waves-light #{disable}"
                     } %>

          <%= render partial: "follows.submit.button",
                     locals:  {
                       method_to_use:  "delete",
                       users:          [user],
                       authorizations: user.authorizations,
                       button_icon:    "remove_circle",
                       button_classes: "btn-floating btn waves-effect waves-light red #{disable}"
                     } %>

        </td>
      </tr>
    <% end %>

    </tbody>

  </table>

</ul>
